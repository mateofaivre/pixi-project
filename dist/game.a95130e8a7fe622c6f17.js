!function(e){function webpackJsonpCallback(t){for(var i,a,o=t[0],c=t[1],l=t[2],s=0,d=[];s<o.length;s++)a=o[s],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(u&&u(t);d.length;)d.shift()();return r.push.apply(r,l||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<r.length;t++){for(var i=r[t],a=!0,o=1;o<i.length;o++){var u=i[o];0!==n[u]&&(a=!1)}a&&(r.splice(t--,1),e=__webpack_require__(__webpack_require__.s=i[0]))}return e}var t={},n={0:0},r=[];function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="";var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=webpackJsonpCallback,i=i.slice();for(var o=0;o<i.length;o++)webpackJsonpCallback(i[o]);var u=a;r.push([20,1]),checkDeferredModules()}({20:function(e,t,n){"use strict";var r=n(2);n(8),n(11),n(12);var i=r(n(5)),a=r(n(6)),o=r(n(29)),u=r(n(13)),c=r(n(14)),l=r(n(7));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var s=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function get(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},d=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return d(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0,n(80);var f=__importStar(n(50)),_=n(15),h=n(90),p=n(96),y=function(e){(0,u.default)(Main,e);var t=_createSuper(Main);function Main(){var e;return(0,i.default)(this,Main),(e=t.call(this,{backgroundColor:0,width:Main.SCREEN_WIDTH,height:Main.SCREEN_HEIGHT,resizeTo:window,autoDensity:!0,resolution:window.devicePixelRatio||1})).playing=!0,e._scene=null,e._newScene=null,e._loader=new _.Loader,e._container=new _.Container,Main._instance=(0,o.default)(e),document.body.appendChild(e.view),e.start(),e._loader.add("assets/space_invaders_font.fnt"),e._loader.add("assets/sprites-mario.json"),e._loader.load(e._onLoaded.bind((0,o.default)(e))),window.onfocus=e._windowGetFocus.bind((0,o.default)(e)),window.onblur=e._windowLostFocus.bind((0,o.default)(e)),e}return(0,a.default)(Main,[{key:"_onLoaded",value:function _onLoaded(){this.ticker.add(this.update,this),window.onresize=this._onResize.bind(this);var e=new _.Graphics;e.beginFill(255),e.drawRect(0,0,Main.SCREEN_WIDTH,Main.SCREEN_HEIGHT),e.endFill(),this._container.addChild(e),(e=new _.Graphics).beginFill(1044480),e.drawRect(0,0,Main.SCREEN_WIDTH,Main.SCREEN_HEIGHT),e.endFill(),this._container.mask=e,this._container.addChild(e),this.stage.addChild(this._container),this._onResize(),this.scene=new h.HomeScreen}},{key:"update",value:function update(){var e=this;if(this.playing){if(this._newScene){var t=!1;if(this._scene){var n=this._scene;t=!0,f.default.to(n,{duration:.5,x:-Main.SCREEN_HEIGHT,ease:f.Linear.easeNone,onComplete:function onComplete(){n.dispose(),e._container.removeChild(n)}})}this._scene=this._newScene,this._newScene=null,t&&(this._scene.x=Main.SCREEN_WIDTH,f.default.to(this._scene,{duration:.5,x:0,ease:f.Linear.easeIn,onComplete:function onComplete(){var t;return null===(t=e._scene)||void 0===t?void 0:t.transitionIntroCompleted()}})),this._container.addChild(this._scene),this._scene.initialize()}this._scene&&this._scene.update(this.ticker.deltaTime)}}},{key:"_onResize",value:function _onResize(){var e=window.innerWidth,t=window.innerHeight,n=p.Maths.getBestFitRatio(new _.Rectangle(0,0,Main.SCREEN_WIDTH,Main.SCREEN_HEIGHT),new _.Rectangle(0,0,e,t));this.renderer.resize(e,t),this.resize(),this._container.scale.set(n);var r=e/2-Main.SCREEN_WIDTH*n/2,i=t/2-Main.SCREEN_HEIGHT*n/2;this._container.position.set(r,i),window.scrollTo(0,0)}},{key:"_windowGetFocus",value:function _windowGetFocus(){this.playing=!0}},{key:"_windowLostFocus",value:function _windowLostFocus(){this.playing=!1}},{key:"scene",get:function get(){return null!=this._newScene?this._newScene:this._scene},set:function set(e){this._newScene=e}},{key:"container",get:function get(){return this._container}}],[{key:"instance",get:function get(){return Main._instance}}]),Main}(_.Application);t.Main=y,y.SCREEN_WIDTH=1920,y.SCREEN_HEIGHT=1080,new y},49:function(e,t,n){"use strict";var r=n(2);n(8),n(11),n(12);var i=r(n(5)),a=r(n(6)),o=r(n(13)),u=r(n(14)),c=r(n(7));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.AScene=void 0;var l=function(e){(0,o.default)(AScene,e);var t=_createSuper(AScene);function AScene(){return(0,i.default)(this,AScene),t.call(this)}return(0,a.default)(AScene,[{key:"initialize",value:function initialize(){}},{key:"transitionIntroCompleted",value:function transitionIntroCompleted(){}},{key:"update",value:function update(e){}},{key:"dispose",value:function dispose(){}}]),AScene}(n(15).Container);t.AScene=l},80:function(e,t,n){"use strict";n.r(t)},90:function(e,t,n){"use strict";var r=n(2);n(8),n(11),n(12);var i=r(n(5)),a=r(n(6)),o=r(n(29)),u=r(n(13)),c=r(n(14)),l=r(n(7));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.HomeScreen=void 0;var s=n(50),d=n(15),f=n(20),_=n(49),h=n(91),p=function(e){(0,u.default)(HomeScreen,e);var t=_createSuper(HomeScreen);function HomeScreen(){var e;return(0,i.default)(this,HomeScreen),(e=t.call(this))._timeline=s.gsap.timeline(),e._ready=d.Sprite.from("smb-start-normal.png"),e._bg=d.Sprite.from("background.png"),e.addChild(e._bg),e._ready.x=(f.Main.SCREEN_WIDTH-e._ready.width)/2,e._ready.y=-e._ready.height,e.addChild(e._ready),e._timeline=s.gsap.timeline(),e._timeline.to(e._ready,{y:(f.Main.SCREEN_HEIGHT-e._ready.height)/2,duration:.6,ease:s.Back.easeOut}),e._timeline.to(e._ready,{alpha:.5,duration:.6,yoyo:!0,repeat:-1}),e._ready.interactive=!0,e._ready.buttonMode=!0,e._ready.once("pointerdown",e._play.bind((0,o.default)(e))),e}return(0,a.default)(HomeScreen,[{key:"_play",value:function _play(){this._timeline.kill(),this._ready.alpha=1,s.gsap.to(this._ready,{y:-this._ready.height,onComplete:function onComplete(){console.log("animation finished"),f.Main.instance.scene=new h.Game}})}}]),HomeScreen}(_.AScene);t.HomeScreen=p},91:function(e,t,n){"use strict";var r=n(2);n(8),n(11),n(12);var i=r(n(5)),a=r(n(6)),o=r(n(92)),u=r(n(13)),c=r(n(14)),l=r(n(7));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var s=n(49),d=n(94),f=n(15),_=n(20),h=function(e){(0,u.default)(Game,e);var t=_createSuper(Game);function Game(){var e;return(0,i.default)(this,Game),(e=t.call(this))._player=new d.Player,e._goomba=f.AnimatedSprite.fromFrames(["goomba-gauche2.png","goomba-droite2.png"]),e._objects=[],e._win=!1,console.log("game launched"),e._player.x=200,e._player.y=200,e.addChild(e._player),e._goomba.x=200,e._goomba.y=200,e.addChild(e._goomba),e._goomba.animationSpeed=.08,e._goomba.play(),e._objects.push(e._player),e}return(0,a.default)(Game,[{key:"initialize",value:function initialize(){(0,o.default)((0,l.default)(Game.prototype),"initialize",this).call(this),this._bg=f.Sprite.from("background.png"),this.addChild(this._bg),this._ground=new f.TilingSprite(f.Texture.from("sol-nes.png"),1920,150),console.log(this._ground.height),this._ground.y=_.Main.SCREEN_HEIGHT-this._ground.height,this.addChild(this._ground),this._player.x=.5*(_.Main.SCREEN_WIDTH-this._player.width),this._player.y=_.Main.SCREEN_HEIGHT-this._ground.height-this._player.height,this.addChild(this._player),this._goomba.x=_.Main.SCREEN_WIDTH-this._goomba.width,this._goomba.y=_.Main.SCREEN_HEIGHT-this._ground.height-this._goomba.height,this.addChild(this._goomba),document.body.addEventListener("click",this._jump.bind(this))}},{key:"dipose",value:function dipose(){(0,o.default)((0,l.default)(Game.prototype),"dispose",this).call(this)}},{key:"update",value:function update(e){(0,o.default)((0,l.default)(Game.prototype),"update",this).call(this,e),this._ground.tilePosition.x-=4,this._goomba.position.x-=6}},{key:"_jump",value:function _jump(){this._player.position.y-=500,this._player.jump(),console.log("jump")}},{key:"_onKeyboard",value:function _onKeyboard(e){}}]),Game}(s.AScene);t.Game=h},94:function(e,t,n){"use strict";var r=n(2);n(8),n(11),n(12);var i=r(n(5)),a=r(n(6)),o=r(n(13)),u=r(n(14)),c=r(n(7));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var l=n(15),s=function(e){(0,o.default)(Player,e);var t=_createSuper(Player);function Player(){var e;return(0,i.default)(this,Player),(e=t.call(this))._run=l.AnimatedSprite.fromFrames(["mario-w-ombre.png","mario-marche.png","mario-run.png"]),e._jump=l.AnimatedSprite.fromFrames(["goomba-gauche2.png","goomba-droite2.png"]),e.addChild(e._run),e._run.animationSpeed=e._jump.animationSpeed=.15,e._run.play(),e}return(0,a.default)(Player,[{key:"jump",value:function jump(){this.removeChild(this._run),this.addChild(this._jump),this._jump.play()}}]),Player}(n(95).AObjectAnimated);t.Player=s},95:function(e,t,n){"use strict";var r=n(2);n(8),n(11),n(12);var i=r(n(5)),a=r(n(6)),o=r(n(13)),u=r(n(14)),c=r(n(7));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.AObjectAnimated=void 0;var l=function(e){(0,o.default)(AObjectAnimated,e);var t=_createSuper(AObjectAnimated);function AObjectAnimated(){var e;return(0,i.default)(this,AObjectAnimated),(e=t.call(this)).kill=!1,e}return(0,a.default)(AObjectAnimated,[{key:"update",value:function update(e){}}]),AObjectAnimated}(n(15).Container);t.AObjectAnimated=l},96:function(e,t,n){"use strict";var r=n(2),i=r(n(5)),a=r(n(6));Object.defineProperty(t,"__esModule",{value:!0}),t.Maths=void 0;var o=function(){function Maths(){(0,i.default)(this,Maths)}return(0,a.default)(Maths,null,[{key:"hitTest",value:function hitTest(e,t,n,r,i,a,o,u){return e+n>i&&e<i+o&&t+r>a&&t<a+u}},{key:"getBestFitRatio",value:function getBestFitRatio(e,t){return t.height/t.width>e.height/e.width?t.width/e.width:t.height/e.height}},{key:"getFillRatio",value:function getFillRatio(e,t){return t.height/t.width>e.height/e.width?t.height/e.height:t.width/e.width}},{key:"randomFloatBetweenTwoNumbers",value:function randomFloatBetweenTwoNumbers(e,t){return Math.random()*(e-t)+t}},{key:"randomIntBetweenTwoNumbers",value:function randomIntBetweenTwoNumbers(e,t){return Math.floor(Math.random()*(e-t)+t)}},{key:"fixedFloat",value:function fixedFloat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}}]),Maths}();t.Maths=o}});