!function(e){function webpackJsonpCallback(t){for(var r,a,o=t[0],c=t[1],s=t[2],l=0,d=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);d.length;)d.shift()();return i.push.apply(i,s||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(a=!1)}a&&(i.splice(t--,1),e=__webpack_require__(__webpack_require__.s=r[0]))}return e}var t={},n={0:0},i=[];function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(n,i,function(t){return e[t]}.bind(null,i));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="";var r=window.webpackJsonp=window.webpackJsonp||[],a=r.push.bind(r);r.push=webpackJsonpCallback,r=r.slice();for(var o=0;o<r.length;o++)webpackJsonpCallback(r[o]);var u=a;i.push([18,1]),checkDeferredModules()}({18:function(e,t,n){"use strict";var i=n(2);n(6),n(7),n(8);var r=i(n(3)),a=i(n(9)),o=i(n(30)),u=i(n(10)),c=i(n(11)),s=i(n(4));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,i=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var l=Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function get(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]},d=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return d(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0,n(83);var _=__importStar(n(20)),f=n(5),h=n(51),p=n(98),y=function(e){(0,u.default)(Main,e);var t=_createSuper(Main);function Main(){var e;return(0,r.default)(this,Main),(e=t.call(this,{backgroundColor:0,width:Main.SCREEN_WIDTH,height:Main.SCREEN_HEIGHT,resizeTo:window,autoDensity:!0,resolution:window.devicePixelRatio||1})).playing=!0,e._scene=null,e._newScene=null,e._loader=new f.Loader,e._container=new f.Container,Main._instance=(0,o.default)(e),document.body.appendChild(e.view),e.start(),e._loader.add("assets/space_invaders_font.fnt"),e._loader.add("assets/mario-font.fnt"),e._loader.add("assets/sprites-mario.json"),e._loader.load(e._onLoaded.bind((0,o.default)(e))),window.onfocus=e._windowGetFocus.bind((0,o.default)(e)),window.onblur=e._windowLostFocus.bind((0,o.default)(e)),e}return(0,a.default)(Main,[{key:"_onLoaded",value:function _onLoaded(){this.ticker.add(this.update,this),window.onresize=this._onResize.bind(this);var e=new f.Graphics;e.beginFill(0),e.drawRect(0,0,Main.SCREEN_WIDTH,Main.SCREEN_HEIGHT),e.endFill(),this._container.addChild(e),(e=new f.Graphics).beginFill(0),e.drawRect(0,0,Main.SCREEN_WIDTH,Main.SCREEN_HEIGHT),e.endFill(),this._container.mask=e,this._container.addChild(e),this.stage.addChild(this._container),this._onResize(),this.scene=new h.HomeScreen}},{key:"update",value:function update(){var e=this;if(this.playing){if(this._newScene){var t=!1;if(this._scene){var n=this._scene;t=!0,_.default.to(n,{duration:.5,x:-Main.SCREEN_HEIGHT,ease:_.Linear.easeNone,onComplete:function onComplete(){n.dispose(),e._container.removeChild(n)}})}this._scene=this._newScene,this._newScene=null,t&&(this._scene.x=Main.SCREEN_WIDTH,_.default.to(this._scene,{duration:.5,x:0,ease:_.Linear.easeIn,onComplete:function onComplete(){var t;return null===(t=e._scene)||void 0===t?void 0:t.transitionIntroCompleted()}})),this._container.addChild(this._scene),this._scene.initialize()}this._scene&&this._scene.update(this.ticker.deltaTime)}}},{key:"_onResize",value:function _onResize(){var e=window.innerWidth,t=window.innerHeight,n=p.Maths.getBestFitRatio(new f.Rectangle(0,0,Main.SCREEN_WIDTH,Main.SCREEN_HEIGHT),new f.Rectangle(0,0,e,t));this.renderer.resize(e,t),this.resize(),this._container.scale.set(n);var i=e/2-Main.SCREEN_WIDTH*n/2,r=t/2-Main.SCREEN_HEIGHT*n/2;this._container.position.set(i,r),window.scrollTo(0,0)}},{key:"_windowGetFocus",value:function _windowGetFocus(){this.playing=!0}},{key:"_windowLostFocus",value:function _windowLostFocus(){this.playing=!1}},{key:"scene",get:function get(){return null!=this._newScene?this._newScene:this._scene},set:function set(e){this._newScene=e}},{key:"container",get:function get(){return this._container}}],[{key:"instance",get:function get(){return Main._instance}}]),Main}(f.Application);t.Main=y,y.SCREEN_WIDTH=1920,y.SCREEN_HEIGHT=1080,new y},31:function(e,t,n){"use strict";var i=n(2);n(6),n(7),n(8);var r=i(n(3)),a=i(n(9)),o=i(n(10)),u=i(n(11)),c=i(n(4));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.AScene=void 0;var s=function(e){(0,o.default)(AScene,e);var t=_createSuper(AScene);function AScene(){return(0,r.default)(this,AScene),t.call(this)}return(0,a.default)(AScene,[{key:"initialize",value:function initialize(){}},{key:"transitionIntroCompleted",value:function transitionIntroCompleted(){}},{key:"update",value:function update(e){}},{key:"dispose",value:function dispose(){}}]),AScene}(n(5).Container);t.AScene=s},51:function(e,t,n){"use strict";var i=n(2);n(6),n(7),n(8);var r=i(n(3)),a=i(n(9)),o=i(n(30)),u=i(n(10)),c=i(n(11)),s=i(n(4));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,i=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.HomeScreen=void 0;var l=n(20),d=n(5),_=n(18),f=n(31),h=n(93),p=function(e){(0,u.default)(HomeScreen,e);var t=_createSuper(HomeScreen);function HomeScreen(){var e;return(0,r.default)(this,HomeScreen),(e=t.call(this))._timeline=l.gsap.timeline(),e._ready=d.Sprite.from("smb-start-normal.png"),e._audio=new Audio("assets/mp3/ending.mp3"),e._bg=d.Sprite.from("background.png"),e.addChild(e._bg),e._rules=d.Sprite.from("rules.png"),e.addChild(e._rules),e._soundIcon=d.Sprite.from("sound-up.png"),e.addChild(e._soundIcon),e._audio.muted=!0,e._soundPosition(),e._ready.x=(_.Main.SCREEN_WIDTH-e._ready.width)/2,e._ready.y=-e._ready.height,e.addChild(e._ready),e._rules.x=(_.Main.SCREEN_WIDTH-e._rules.width)/2,e._rules.y=-e._rules.height,e.addChild(e._rules),e._timeline=l.gsap.timeline(),e._timeline.to(e._ready,{y:(_.Main.SCREEN_HEIGHT-e._ready.height-50)/2,duration:.6,ease:l.Back.easeOut}),e._timeline.to(e._rules,{y:(_.Main.SCREEN_HEIGHT-e._rules.height+e._ready.height+150)/2,duration:.6,ease:l.Back.easeOut}),e._timeline.to(e._ready,{alpha:.5,duration:.6,yoyo:!0,repeat:-1}),e._ready.interactive=!0,e._ready.buttonMode=!0,e._ready.once("pointerdown",e._play.bind((0,o.default)(e))),e._soundIcon.on("pointerdown",e._playSound.bind((0,o.default)(e))),e}return(0,a.default)(HomeScreen,[{key:"_soundPosition",value:function _soundPosition(){this._soundIcon.x=20,this._soundIcon.y=_.Main.SCREEN_HEIGHT-this._soundIcon.height-20,this._soundIcon.interactive=!0,this._soundIcon.buttonMode=!0}},{key:"_play",value:function _play(){this._audio.pause(),this._timeline.kill(),this._ready.alpha=1,l.gsap.to(this._ready,{y:-this._ready.height,onComplete:function onComplete(){console.log("animation finished"),_.Main.instance.scene=new h.Game}})}},{key:"_playSound",value:function _playSound(){console.log("pppp"),this._audio.muted?(this._audio.muted=!1,this._audio.play(),this._soundIcon.texture=d.Texture.from("sound-mute.png"),this._soundPosition()):(console.log("pause"),this._audio.muted=!0,this._soundIcon.texture=d.Texture.from("sound-up.png"),this._soundPosition())}}]),HomeScreen}(f.AScene);t.HomeScreen=p},53:function(e,t,n){"use strict";var i=n(2);n(6),n(7),n(8);var r=i(n(3)),a=i(n(9)),o=i(n(10)),u=i(n(11)),c=i(n(4));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.AObjectAnimated=void 0;var s=function(e){(0,o.default)(AObjectAnimated,e);var t=_createSuper(AObjectAnimated);function AObjectAnimated(){var e;return(0,r.default)(this,AObjectAnimated),(e=t.call(this)).kill=!1,e}return(0,a.default)(AObjectAnimated,[{key:"update",value:function update(e){}}]),AObjectAnimated}(n(5).Container);t.AObjectAnimated=s},83:function(e,t,n){"use strict";n.r(t)},93:function(e,t,n){"use strict";var i=n(2);n(6),n(7),n(8);var r=i(n(3)),a=i(n(9)),o=i(n(52)),u=i(n(10)),c=i(n(11)),s=i(n(4));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,i=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var l=n(31),d=n(95),_=n(5),f=n(18),h=n(96),p=n(97),y=function(e){(0,u.default)(Game,e);var t=_createSuper(Game);function Game(){var e;return(0,r.default)(this,Game),(e=t.call(this))._player=new d.Player,e._goomba=new h.Enemy,e._objects=[],e._win=!1,e._audio=new Audio("assets/mp3/home.mp3"),e.audioGameOver=new Audio("assets/mp3/game-over.mp3"),e._isEnd=!1,e._timeTxt=new _.BitmapText("0 s",{fontName:"Space Invaders",fontSize:32}),e._time=0,e._tempsJeu="",console.log("game launched"),e._audio.play(),e._player.x=200,e._player.y=200,e.addChild(e._player),e._goomba.x=200,e._goomba.y=200,e.addChild(e._goomba),e._objects.push(e._player),e}return(0,a.default)(Game,[{key:"initialize",value:function initialize(){(0,o.default)((0,s.default)(Game.prototype),"initialize",this).call(this),this._bg=_.Sprite.from("background.png"),this.addChild(this._bg),this._timeTxt.x=10,this._timeTxt.y=20,this.addChild(this._timeTxt),this._ground=new _.TilingSprite(_.Texture.from("sol-nes.png"),1920,150),console.log(this._ground.height),this._ground.y=f.Main.SCREEN_HEIGHT-this._ground.height,this.addChild(this._ground),this._player.x=.5*(f.Main.SCREEN_WIDTH-this._player.width),this._player.y=f.Main.SCREEN_HEIGHT-this._ground.height-this._player.height,this.addChild(this._player),this._goomba.x=f.Main.SCREEN_WIDTH-this._goomba.width,this._goomba.y=f.Main.SCREEN_HEIGHT-this._ground.height-85,this.addChild(this._goomba),window.addEventListener("keyup",this._onKeyboard.bind(this))}},{key:"dipose",value:function dipose(){(0,o.default)((0,s.default)(Game.prototype),"dispose",this).call(this)}},{key:"update",value:function update(e){(0,o.default)((0,s.default)(Game.prototype),"update",this).call(this,e),this._ground.tilePosition.x-=4,this._goomba.update(e),!this._isEnd&&this._isIntersecting(this._player,this._goomba)&&(this._goomba.hurt=!0,this._tempsJeu=this._timeTxt.text,console.log(this._tempsJeu),this._fin(),this._isEnd=!0),this._time+=e/55,this._timeTxt.text=Math.floor(this._time)+" s"}},{key:"_isIntersecting",value:function _isIntersecting(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._player,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._goomba;return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}},{key:"_fin",value:function _fin(){this._audio.pause(),this.audioGameOver.play(),this._ground.tilePosition.x-=0,this._player.die(),setTimeout((function(){f.Main.instance.scene=new p.GameOver}),1e4)}},{key:"_jump",value:function _jump(){this._player.jump()}},{key:"_onKeyboard",value:function _onKeyboard(e){32==e.keyCode&&this._jump()}}]),Game}(l.AScene);t.Game=y},95:function(e,t,n){"use strict";var i=n(2);n(6),n(7),n(8);var r=i(n(3)),a=i(n(9)),o=i(n(10)),u=i(n(11)),c=i(n(4));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var s=n(5),l=n(53),d=n(5),_=n(20),f=function(e){(0,o.default)(Player,e);var t=_createSuper(Player);function Player(){var e;return(0,r.default)(this,Player),(e=t.call(this))._run=s.AnimatedSprite.fromFrames(["mario-w-ombre.png","mario-marche.png","mario-run.png"]),e._jump=s.AnimatedSprite.fromFrames(["mario-jump.png"]),e._die=d.Sprite.from("mario-die.png"),e._isJumping=!1,e.addChild(e._run),e._run.animationSpeed=.15,e._jump.animationSpeed=.1,e._run.play(),console.log("ici",e.height),e}return(0,a.default)(Player,[{key:"jump",value:function jump(){var e=this;this._isJumping||(this.removeChild(this._run),this.addChild(this._jump),this._isJumping=!0,_.gsap.to(this,{duration:.5,y:600,yoyo:!0,repeat:1,onComplete:function onComplete(){e.removeChild(e._jump),e.addChild(e._run),e._isJumping=!1}}),this._jump.play())}},{key:"die",value:function die(){this.removeChildAt(0),this.addChild(this._die)}}]),Player}(l.AObjectAnimated);t.Player=f},96:function(e,t,n){"use strict";var i=n(2);n(6),n(7),n(8);var r=i(n(3)),a=i(n(9)),o=i(n(52)),u=i(n(10)),c=i(n(11)),s=i(n(4));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,i=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Enemy=void 0;var l=n(5),d=function(e){(0,u.default)(Enemy,e);var t=_createSuper(Enemy);function Enemy(){var e;return(0,r.default)(this,Enemy),(e=t.call(this))._run=l.AnimatedSprite.fromFrames(["goomba-gauche2.png","goomba-base2.png","goomba-droite2.png"]),e.hurt=!1,e.addChild(e._run),e._run.animationSpeed=.15,e._run.play(),e}return(0,a.default)(Enemy,[{key:"update",value:function update(e){(0,o.default)((0,s.default)(Enemy.prototype),"update",this).call(this,e),this.hurt?this._run.stop():this.x-=6}}]),Enemy}(n(53).AObjectAnimated);t.Enemy=d},97:function(e,t,n){"use strict";var i=n(2);n(6),n(7),n(8);var r=i(n(3)),a=i(n(10)),o=i(n(11)),u=i(n(4));function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,o.default)(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.GameOver=void 0;var c=n(5),s=n(31),l=n(18),d=n(20),_=n(51),f=function(e){(0,a.default)(GameOver,e);var t=_createSuper(GameOver);function GameOver(){var e;(0,r.default)(this,GameOver),e=t.call(this);var n=c.Sprite.from("game-over-full-text.png");return n.x=(l.Main.SCREEN_WIDTH-n.width)/2,n.y=(l.Main.SCREEN_HEIGHT-n.height)/2,e.addChild(n),n.interactive=!0,n.buttonMode=!0,d.gsap.to(n,{alpha:.5,duration:.8,repeat:-1,yoyo:!0}),n.once("pointerdown",(function(){l.Main.instance.scene=new _.HomeScreen})),e}return GameOver}(s.AScene);t.GameOver=f},98:function(e,t,n){"use strict";var i=n(2),r=i(n(3)),a=i(n(9));Object.defineProperty(t,"__esModule",{value:!0}),t.Maths=void 0;var o=function(){function Maths(){(0,r.default)(this,Maths)}return(0,a.default)(Maths,null,[{key:"hitTest",value:function hitTest(e,t,n,i,r,a,o,u){return e+n>r&&e<r+o&&t+i>a&&t<a+u}},{key:"getBestFitRatio",value:function getBestFitRatio(e,t){return t.height/t.width>e.height/e.width?t.width/e.width:t.height/e.height}},{key:"getFillRatio",value:function getFillRatio(e,t){return t.height/t.width>e.height/e.width?t.height/e.height:t.width/e.width}},{key:"randomFloatBetweenTwoNumbers",value:function randomFloatBetweenTwoNumbers(e,t){return Math.random()*(e-t)+t}},{key:"randomIntBetweenTwoNumbers",value:function randomIntBetweenTwoNumbers(e,t){return Math.floor(Math.random()*(e-t)+t)}},{key:"fixedFloat",value:function fixedFloat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}}]),Maths}();t.Maths=o}});